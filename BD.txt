drop database ProyectoIS;
create database ProyectoIS;
use ProyectoIS;
CREATE TABLE USUARIO (
	Id_Usuario INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	Usuario varchar(50) not null,
	Password varchar(50) not null,
	Tipo varchar(50),
	Estado int 
);

CREATE TABLE DESARROLLADOR (
	Id_Desarrollador INT NOT NULL PRIMARY KEY,
	Nombres varchar(50) not null,
	Ap_Paterno varchar(50) not null,
	Ap_Materno varchar(50) not null,
	Genero varchar(10) not null,
	Fecha_Nacimiento date not null,
	Experiencia int not null,
	Correo varchar(50) not null,
	Telefono varchar(50) not null,
	Reputacion int not null,
	FOREIGN KEY (Id_Desarrollador) REFERENCES USUARIO(Id_Usuario)
);

CREATE TABLE ESPECIALIDAD (
	Id_Especialidad INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	Especialidad varchar(50) not null
);

CREATE TABLE DESARROLLADOR_ESPECIALIDAD (
	Id_Desarrollador INT NOT NULL,
	Id_Especialidad INT NOT NULL,
	FOREIGN KEY (Id_Desarrollador) REFERENCES DESARROLLADOR(Id_Desarrollador),
	FOREIGN KEY (Id_Especialidad) REFERENCES ESPECIALIDAD(Id_Especialidad)
);

CREATE TABLE CLIENTE (
	Id_Cliente INT NOT NULL PRIMARY KEY,
	Nombres varchar(50) not null,
	Ap_Paterno varchar(50) not null,
	Ap_Materno varchar(50) not null,
	Genero varchar(10) not null,
	Fecha_Nacimiento date not null,
	Reputacion int not null,
	Correo varchar(50) not null,
	Telefono varchar(50) not null,
	FOREIGN KEY (Id_Cliente) REFERENCES USUARIO(Id_Usuario)
);

CREATE TABLE PROYECTO (
	Id_Proyecto INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	Id_Cliente INT NOT NULL,
	Nombre varchar(50) not null,
	Tipo varchar(50) not null,
	Descripcion varchar(500) not null,
	Duracion int not null,
	Pago int not null,
	Estado varchar(50) not null,
	FOREIGN KEY (Id_Cliente) REFERENCES CLIENTE(Id_Cliente)
);

CREATE TABLE CONTRATO (
	Id_Contrato INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	Id_Desarrollador int not null,
	Id_Proyecto INT not null,
	FechaInicio date not null,
	FechaTermino date not null,
	FOREIGN KEY (Id_Desarrollador) REFERENCES DESARROLLADOR(Id_Desarrollador),
	FOREIGN KEY (Id_Proyecto) REFERENCES PROYECTO(Id_Proyecto)
);

CREATE TABLE AVANCE (
	Id_Avance INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	Id_Contrato int not null,
	FechaAvance date not null,
	Comentario varchar(500) not null,
	FOREIGN KEY (Id_Contrato) REFERENCES CONTRATO(Id_Contrato)
);

CREATE TABLE CHAT (
	Id_Origen INT NOT NULL,
	UserOrigen varchar(50) not null,
	Id_Destino int not null,
	UserDestino varchar(50) not null,
	Mensaje varchar(500) not null,
	Fecha datetime not null
);

CREATE TABLE ADMINISTRADOR (
	Id_Administrador INT NOT NULL PRIMARY KEY,
	Nombres varchar(50) not null,
	Ap_Paterno varchar(50) not null,
	Ap_Materno varchar(50) not null,
	Genero varchar(10) not null,
	Fecha_Nacimiento date not null,
	Correo varchar(50) not null,
	Telefono varchar(50) not null,
	FOREIGN KEY (Id_Administrador) REFERENCES USUARIO(Id_Usuario)
);

CREATE TABLE REPORTE (
	Id_Reporte INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	Id_Usuario int not null,
	Descripcion varchar(500) not null
);


INSERT INTO USUARIO VALUES(1,'AngelC45', '123','Desarrollador',1);
INSERT INTO USUARIO VALUES(2,'JCooker', '123','Desarrollador',1);
INSERT INTO USUARIO VALUES(3,'AlanSLC', '123','Cliente',1);
INSERT INTO USUARIO VALUES(4,'George55', '123', 'Administrador',1);



INSERT INTO DESARROLLADOR VALUES(1, 'Angel', 'Chavez', 'Chavez', 'Masculino', '1996-04-05', 1,'avener12@live.com.mx','58987522',10);
INSERT INTO DESARROLLADOR VALUES(2, 'Jorge', 'Romero', 'Santana', 'Masculino', '1996-12-25', 3,'cocinafacil@hotmail.com','55559575',8);

INSERT INTO CLIENTE VALUES(3,'Alan', 'Garcia', 'Davila', 'Masculino', '1995-12-05', 1,'nalan@gmail.com','48984522');

INSERT INTO ADMINISTRADOR VALUES(4,'Jorge', 'Paredes', 'Bermudez', 'Masculino', '1996-12-05', 'zeus55@gmail.com','01444522');

INSERT INTO ESPECIALIDAD VALUES(1,'Bases de datos SQL');
INSERT INTO ESPECIALIDAD VALUES(2,'HTML');
INSERT INTO ESPECIALIDAD VALUES(3,'Java');
INSERT INTO ESPECIALIDAD VALUES(4,'Lenguaje C');
INSERT INTO ESPECIALIDAD VALUES(5,'PHP');

INSERT INTO DESARROLLADOR_ESPECIALIDAD VALUES(1,1);
INSERT INTO DESARROLLADOR_ESPECIALIDAD VALUES(1,2);
INSERT INTO DESARROLLADOR_ESPECIALIDAD VALUES(1,4);
INSERT INTO DESARROLLADOR_ESPECIALIDAD VALUES(2,3);
INSERT INTO DESARROLLADOR_ESPECIALIDAD VALUES(2,5);

INSERT INTO PROYECTO VALUES(1, 3, 'Paginas x','HTML', 'Pagina de comercio de aparatos electronicos.',4,12000,'En espera de desarrollador');
INSERT INTO PROYECTO VALUES(2, 3, 'Bases x','Bases de datos SQL', 'Base de datos de una empresa',4,16000,'En desarrollo');
INSERT INTO PROYECTO VALUES(3, 3, 'Juego x','Java', 'Juego de gato',2,6000,'Terminado');

INSERT INTO CONTRATO VALUES(1,2,3,'2017-04-10','2017-04-24');
INSERT INTO CONTRATO VALUES(2,1,2,'2017-05-10','2017-06-10');

INSERT INTO AVANCE VALUES(1,1,'2017-04-15','Entrega de la interfaz grafica');
INSERT INTO AVANCE VALUES(2,1,'2017-04-20','Gato funcional, correcciones pendientes');
INSERT INTO AVANCE VALUES(3,2,'2017-05-20','Implementacion pendiente');

INSERT INTO CHAT VALUES(2,'JCooker',1,'AlanSLC','Hola','2017-05-14 12:12:12');

INSERT INTO REPORTE VALUES(1,2,'Pago atrazado');

select * from USUARIO;
select * from DESARROLLADOR;
select * from CLIENTE;
select * from ADMINISTRADOR;
select * from ESPECIALIDAD;
select * from DESARROLLADOR_ESPECIALIDAD;
select * from PROYECTO;
select * from CONTRATO;
select * from AVANCE;
select * from CHAT;
select * from REPORTE;
